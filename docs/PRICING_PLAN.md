# DAR App - Comprehensive Pricing Plan

## Executive Summary

This document outlines a comprehensive pricing strategy for the Daily Accomplishment Report (DAR) application, designed to monetize the product while providing value to individual professionals, teams, and enterprises. The pricing model balances free access for individual users with premium features for power users and organizations.

---

## Table of Contents

1. [Pricing Tiers Overview](#pricing-tiers-overview)
2. [Feature Distribution Matrix](#feature-distribution-matrix)
3. [Target Audience & Value Proposition](#target-audience--value-proposition)
4. [Pricing Strategy & Rationale](#pricing-strategy--rationale)
5. [Competitive Analysis](#competitive-analysis)
6. [Implementation Roadmap](#implementation-roadmap)
7. [Technical Implementation](#technical-implementation)
8. [Payment Integration](#payment-integration)
9. [Billing Structure](#billing-structure)
10. [Trial & Onboarding](#trial--onboarding)
11. [Upgrade Paths & Conversion Strategy](#upgrade-paths--conversion-strategy)
12. [Revenue Projections](#revenue-projections)

---

## Pricing Tiers Overview

### 1. Free (Individual)
**Price:** $0/month
- Perfect for individuals getting started with daily reflection
- Limited but functional core features
- Ad-supported (optional future monetization)

### 2. Pro (Power Users)
**Price:** $9/month or $90/year (save 17%)
- For professionals who want advanced personal productivity
- Unlimited usage with AI-powered insights
- Priority support

### 3. Team (Small-Medium Teams)
**Price:** $15/user/month or $150/user/year (save 17%)
- Minimum 2 users, maximum 50 users
- Collaboration and team management features
- Team analytics and insights
- Admin controls

### 4. Enterprise (Large Organizations)
**Price:** Custom pricing (starts at $20/user/month for 50+ users)
- Volume discounts available
- Dedicated support and onboarding
- Custom integrations
- Advanced security and compliance

---

## Feature Distribution Matrix

### Core Features

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **AI Chat & Reflection** | 50 messages/month | Unlimited | Unlimited | Unlimited |
| **Message History** | Last 30 days | Unlimited | Unlimited | Unlimited |
| **Data Export** | Basic (TXT) | Advanced (DOCX, PDF) | Advanced (DOCX, PDF) | Advanced + Custom |
| **Dark Mode** | ✅ | ✅ | ✅ | ✅ |
| **Mobile Responsive** | ✅ | ✅ | ✅ | ✅ |
| **Email Notifications** | - | ✅ | ✅ | ✅ |
| **API Access** | - | - | Rate Limited | Full Access |

### Task Management

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **Tasks** | 25 active tasks | Unlimited | Unlimited | Unlimited |
| **Task Categories** | 3 categories | Unlimited | Unlimited | Unlimited |
| **Task Priority** | ✅ | ✅ | ✅ | ✅ |
| **Task Assignment** | - | - | ✅ | ✅ |
| **Task Dependencies** | - | - | ✅ | ✅ |
| **Recurring Tasks** | - | ✅ | ✅ | ✅ |
| **Task Templates** | - | ✅ | ✅ | ✅ |

### Templates & Prompts

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **System Templates** | ✅ (5 templates) | ✅ (All) | ✅ (All) | ✅ (All) |
| **Custom Templates** | 3 templates | Unlimited | Unlimited | Unlimited |
| **Shared Templates** | - | - | ✅ | ✅ |
| **Template Library** | - | ✅ | ✅ | ✅ |
| **AI Template Generation** | - | ✅ | ✅ | ✅ |

### Analytics & Insights

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **Activity Heatmap** | Last 30 days | Unlimited | Unlimited | Unlimited |
| **Productivity Trends** | Basic | Advanced | Advanced | Advanced |
| **AI-Powered Insights** | - | ✅ | ✅ | ✅ |
| **Goal Tracking** | - | 5 goals | Unlimited | Unlimited |
| **Custom Reports** | - | ✅ | ✅ | ✅ |
| **Team Analytics** | - | - | ✅ | ✅ |
| **Manager Dashboard** | - | - | ✅ | ✅ |
| **Data Visualization** | Basic | Advanced | Advanced | Custom |

### Reporting

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **Daily Reports** | ✅ | ✅ | ✅ | ✅ |
| **Weekly Summaries** | - | ✅ | ✅ | ✅ |
| **Monthly Reports** | - | ✅ | ✅ | ✅ |
| **Custom Date Range** | - | ✅ | ✅ | ✅ |
| **Automated Email Reports** | - | ✅ | ✅ | ✅ |
| **Report Scheduling** | - | - | ✅ | ✅ |
| **Team Reports** | - | - | ✅ | ✅ |

### Team Collaboration

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **Team Workspaces** | - | - | ✅ | ✅ |
| **Team Members** | - | - | 2-50 users | Unlimited |
| **Member Invitations** | - | - | ✅ | ✅ |
| **Role-Based Access** | - | - | ✅ | ✅ |
| **Shared Conversations** | - | - | ✅ | ✅ |
| **Comments & Feedback** | - | - | ✅ | ✅ |
| **@Mentions** | - | - | ✅ | ✅ |
| **Team Goals** | - | - | ✅ | ✅ |
| **Manager Reviews** | - | - | Basic | Advanced |

### Notifications & Reminders

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **Daily Reminders** | - | ✅ | ✅ | ✅ |
| **Weekly Summary Emails** | - | ✅ | ✅ | ✅ |
| **Monthly Summary Emails** | - | ✅ | ✅ | ✅ |
| **Custom Reminder Times** | - | ✅ | ✅ | ✅ |
| **Timezone Support** | - | ✅ | ✅ | ✅ |
| **In-App Notifications** | - | - | ✅ | ✅ |
| **Slack Integration** | - | - | ✅ | ✅ |
| **MS Teams Integration** | - | - | - | ✅ |

### Support & Services

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **Email Support** | Community | Priority (48h) | Priority (24h) | Dedicated (4h) |
| **Documentation** | ✅ | ✅ | ✅ | ✅ |
| **Video Tutorials** | Basic | Full Access | Full Access | Full Access |
| **Onboarding** | Self-service | Email onboarding | Video call | Dedicated CSM |
| **Training Sessions** | - | - | 1 session | Unlimited |
| **Custom Development** | - | - | - | Available |
| **SLA** | - | - | 99.5% | 99.9% |
| **Dedicated Account Manager** | - | - | - | ✅ |

### Security & Compliance

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **SSL/TLS Encryption** | ✅ | ✅ | ✅ | ✅ |
| **Data Encryption at Rest** | ✅ | ✅ | ✅ | ✅ |
| **2FA/MFA** | - | ✅ | ✅ | ✅ |
| **SSO (SAML)** | - | - | - | ✅ |
| **Audit Logs** | - | - | Basic | Advanced |
| **Data Retention Control** | - | - | ✅ | ✅ |
| **GDPR Compliance** | ✅ | ✅ | ✅ | ✅ |
| **SOC 2 Compliance** | - | - | - | ✅ |
| **Custom Data Residency** | - | - | - | ✅ |
| **Legal Review** | - | - | - | ✅ |

### Integrations

| Feature | Free | Pro | Team | Enterprise |
|---------|------|-----|------|------------|
| **Calendar Sync** | - | ✅ | ✅ | ✅ |
| **Slack** | - | - | ✅ | ✅ |
| **Microsoft Teams** | - | - | - | ✅ |
| **Google Workspace** | - | ✅ | ✅ | ✅ |
| **Jira/Asana/Trello** | - | - | ✅ | ✅ |
| **Zapier** | - | ✅ | ✅ | ✅ |
| **API Access** | - | - | Rate Limited | Full |
| **Webhooks** | - | - | ✅ | ✅ |
| **Custom Integrations** | - | - | - | ✅ |

---

## Target Audience & Value Proposition

### Free Tier - "The Starter"
**Target Audience:**
- Individual professionals exploring daily reflection
- Students and early-career professionals
- Budget-conscious users
- Users testing before commitment

**Value Proposition:**
- "Start your daily accomplishment journey free"
- Experience core AI-powered reflection
- Build the habit of daily logging
- No credit card required

**Pain Points Addressed:**
- Lack of structured reflection process
- Forgetting daily accomplishments during reviews
- Need for accountability

**Conversion Goals:**
- 15% convert to Pro after 30 days
- Target: 10,000 free users in first 6 months

---

### Pro Tier - "The Power User"
**Target Audience:**
- Individual contributors and senior professionals
- Freelancers and consultants
- People with performance reviews
- Ambitious professionals tracking career growth

**Value Proposition:**
- "Supercharge your productivity with unlimited AI assistance"
- Advanced analytics and insights
- Unlimited history and export
- Priority support

**Pain Points Addressed:**
- Limited message quota on Free
- Need for long-term trend analysis
- Professional reporting for reviews
- Time-consuming manual tracking

**Typical User Profile:**
- Software engineers, product managers, designers
- Consultants tracking billable work
- Professionals preparing for promotions
- Annual income: $80K-$150K

**ROI Justification:**
- Time saved: 2-3 hours/month on review prep
- Value of time saved: $100-200/month
- Cost: $9/month (11x ROI)
- Career impact: Better performance reviews = raises/promotions

---

### Team Tier - "The Collaborators"
**Target Audience:**
- Small to medium teams (2-50 people)
- Startups and scale-ups
- Remote-first companies
- Engineering/Product/Design teams
- Professional services firms

**Value Proposition:**
- "Elevate team performance with shared insights"
- Team visibility and alignment
- Manager dashboard for reviews
- Collaborative goal tracking

**Pain Points Addressed:**
- Lack of visibility into team accomplishments
- Difficulty with 1-on-1 prep
- Time-consuming status updates
- Poor performance review documentation

**Typical Customer Profile:**
- Tech startups (5-30 employees)
- Agency teams (10-25 people)
- Department within larger company
- Annual revenue: $1M-$50M

**ROI Justification:**
- Time saved per person: 1 hour/week on standups/updates
- Team of 10: 40 hours/month saved
- Value at $50/hour: $2,000/month saved
- Cost: $150/month (13x ROI)
- Bonus: Better team performance and retention

**Budget Holder:**
- Engineering Manager, VP Engineering
- Head of Product, CTO
- Operations Manager
- Typical team software budget: $500-$2,000/month

---

### Enterprise Tier - "The Organization"
**Target Audience:**
- Large companies (50+ employees)
- Fortune 500 companies
- Government agencies
- Healthcare organizations
- Regulated industries

**Value Proposition:**
- "Enterprise-grade performance management at scale"
- Custom integrations and workflows
- Advanced security and compliance
- Dedicated support and success

**Pain Points Addressed:**
- Complex performance review processes
- Compliance and security requirements
- Need for custom workflows
- Integration with existing tools
- Training and adoption challenges

**Typical Customer Profile:**
- Tech companies: 500-10,000+ employees
- Financial services: Strict compliance needs
- Healthcare: HIPAA compliance required
- Annual revenue: $50M+

**ROI Justification:**
- Time saved per employee: 2 hours/month on reviews
- Organization of 500: 1,000 hours/month saved
- Value at $75/hour: $75,000/month saved
- Cost: $10,000/month (7.5x ROI)
- Bonus: Improved employee performance, retention, engagement

**Budget Holder:**
- VP of Engineering, CTO
- Chief People Officer, VP HR
- Head of Performance Management
- Typical HR tech budget: $50-500 per employee/year

---

## Pricing Strategy & Rationale

### Pricing Philosophy

1. **Value-Based Pricing**: Price based on value delivered, not cost to serve
2. **Freemium Model**: Free tier drives acquisition, paid tiers monetize
3. **Per-User Pricing**: Scales with customer growth and usage
4. **Annual Discounts**: Encourage commitment and reduce churn
5. **Volume Discounts**: Incentivize larger team adoption

### Price Points Rationale

**Pro - $9/month:**
- Below the "impulse purchase" threshold ($10-15)
- Comparable to Netflix, Spotify (entertainment)
- Less than one lunch per month
- Anchors against Free ($0) and Team ($15/user)
- Sweet spot for individual productivity tools

**Team - $15/user/month:**
- Significant premium over Pro (67% increase)
- Justified by collaboration features
- Still affordable for small teams
- Comparable to: Notion Team ($15), Asana ($13.49), Monday.com ($12)
- Team of 5: $75/month = coffee budget

**Enterprise - $20+/user/month:**
- Premium for advanced features and support
- Volume discounts bring to $12-15/user for large orgs
- Custom pricing allows flexibility
- Comparable to: Workday, SAP SuccessFactors ($20-40/user)

### Annual Pricing Strategy

- **17% discount** (approximately 2 months free)
- Industry standard for SaaS annual contracts
- Reduces churn and improves cash flow
- Positions annual as the "smart choice"

**Annual Pricing:**
- Pro: $90/year (vs $108 monthly)
- Team: $150/user/year (vs $180 monthly)
- Enterprise: Negotiated (typically 15-25% discount)

---

## Competitive Analysis

### Direct Competitors

#### 1. **Reflect** - Personal Note-Taking
- **Pricing:** $10/month
- **Target:** Individuals
- **Strengths:** End-to-end encryption, fast sync, backlinking
- **Weaknesses:** No team features, limited AI, no analytics
- **DAR Advantage:** AI-powered reflection, team collaboration, analytics

#### 2. **Notion** - All-in-One Workspace
- **Pricing:** Free, Plus ($10/user), Business ($18/user), Enterprise (custom)
- **Target:** Individuals and teams
- **Strengths:** Flexible, databases, rich content
- **Weaknesses:** Steep learning curve, not focused on accomplishments
- **DAR Advantage:** Purpose-built for daily reflection, AI assistance, analytics

#### 3. **Fellow** - Meeting & Productivity
- **Pricing:** Free, Pro ($7/user), Business ($10/user)
- **Target:** Teams
- **Strengths:** Meeting notes, 1-on-1s, objectives
- **Weaknesses:** Meeting-focused, limited AI, expensive for large teams
- **DAR Advantage:** Daily focus (not just meetings), better AI, more affordable

#### 4. **Lattice** - Performance Management
- **Pricing:** Custom (typically $11-15/user/month)
- **Target:** HR and large teams
- **Strengths:** Full performance management suite, goals, reviews
- **Weaknesses:** Enterprise-only, complex, expensive
- **DAR Advantage:** Bottom-up (employee-driven), affordable for small teams

#### 5. **15Five** - Continuous Performance
- **Pricing:** Engage ($4/user), Perform ($10/user), Total Platform ($16/user)
- **Target:** Companies 10-500 employees
- **Strengths:** Check-ins, OKRs, 1-on-1s, recognition
- **Weaknesses:** Less AI, rigid structure
- **DAR Advantage:** More flexible, better AI, lower price point

### Competitive Positioning

**DAR's Unique Position:**
- **AI-First:** Best-in-class AI for reflection and insights
- **Bottom-Up:** Employee-driven, not HR-mandated
- **Affordable:** Lower price than competitors for similar features
- **Flexible:** From individual to enterprise
- **Daily Focus:** Built around daily habits, not quarterly reviews

**Competitive Pricing Summary:**

| Tool | Individual | Team (per user) | Target Market |
|------|-----------|----------------|---------------|
| **DAR** | **$9** | **$15** | **All** |
| Reflect | $10 | N/A | Individual |
| Notion | $10 | $18 | All |
| Fellow | N/A | $10 | Teams |
| Lattice | N/A | $15 | Enterprise |
| 15Five | N/A | $16 | Mid-Market |

**DAR is competitively priced at the lower end while offering more AI capabilities.**

---

## Implementation Roadmap

### Phase 1: Foundation (Weeks 1-2)
**Goal:** Set up payment infrastructure and basic tier system

**Tasks:**
1. Database schema for subscriptions
2. Stripe integration
3. Basic subscription management UI
4. Feature gating middleware
5. Billing portal

**Deliverables:**
- Subscriptions table created
- Stripe connected
- Users can subscribe to Pro
- Free users see upgrade prompts
- Users can manage billing

---

### Phase 2: Feature Gating (Weeks 3-4)
**Goal:** Implement usage limits and feature restrictions

**Tasks:**
1. Message quota enforcement (Free tier)
2. Task limit enforcement (Free tier)
3. Template limit enforcement (Free tier)
4. Export format restrictions
5. History retention limits
6. Usage tracking and metering

**Deliverables:**
- Free users limited to 50 messages/month
- Free users limited to 25 active tasks
- Free users limited to 3 custom templates
- Usage dashboards for users
- Soft limits with upgrade prompts

---

### Phase 3: Team Tier (Weeks 5-6)
**Goal:** Enable team subscriptions and management

**Tasks:**
1. Team billing and seat management
2. Team admin dashboard
3. Invite flow with billing
4. Seat-based pricing calculation
5. Team analytics features
6. Manager dashboard

**Deliverables:**
- Teams can subscribe
- Admins manage billing and seats
- Per-seat billing works correctly
- Team-specific features enabled
- Usage tracking per team

---

### Phase 4: Enterprise Features (Weeks 7-8)
**Goal:** Build enterprise-specific capabilities

**Tasks:**
1. Custom contract management
2. SSO integration (SAML)
3. Advanced audit logging
4. Custom data retention
5. API access and rate limits
6. Dedicated support portal

**Deliverables:**
- Enterprise plans can be created
- SSO works for large organizations
- Audit logs accessible
- API documentation
- Support SLA tracking

---

### Phase 5: Optimization & Growth (Weeks 9-10)
**Goal:** Improve conversion and retention

**Tasks:**
1. Upgrade prompts and CTAs
2. Trial experience optimization
3. Onboarding improvements
4. Email drip campaigns
5. Analytics and tracking
6. A/B testing framework

**Deliverables:**
- Targeted upgrade prompts
- Optimized trial flows
- Email sequences for conversion
- Conversion tracking
- Churn prevention workflows

---

### Phase 6: Advanced Features (Weeks 11-12)
**Goal:** Build competitive moats

**Tasks:**
1. Advanced AI features (Pro+)
2. Integrations (Slack, Calendar, etc.)
3. Custom reports builder
4. Goal recommendations
5. Team leaderboards
6. Mobile app features

**Deliverables:**
- Differentiated Pro features
- Key integrations live
- Custom reporting available
- Enhanced AI capabilities
- Mobile parity with web

---

## Technical Implementation

### Database Schema

#### 1. **Subscription Plans Table**
```sql
CREATE TABLE subscription_plans (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL UNIQUE, -- 'free', 'pro', 'team', 'enterprise'
  display_name TEXT NOT NULL, -- 'Free', 'Pro', 'Team', 'Enterprise'
  description TEXT,
  price_monthly INTEGER, -- in cents, null for free
  price_yearly INTEGER, -- in cents, null for free
  stripe_price_id_monthly TEXT,
  stripe_price_id_yearly TEXT,
  features JSONB, -- Feature flags and limits
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Insert default plans
INSERT INTO subscription_plans (name, display_name, description, price_monthly, price_yearly, features) VALUES
('free', 'Free', 'Perfect for getting started', 0, 0, '{
  "messages_per_month": 50,
  "active_tasks": 25,
  "custom_templates": 3,
  "history_days": 30,
  "export_formats": ["txt"],
  "system_templates": 5,
  "analytics_days": 30,
  "email_reminders": false,
  "ai_insights": false
}'::jsonb),
('pro', 'Pro', 'For power users', 900, 9000, '{
  "messages_per_month": -1,
  "active_tasks": -1,
  "custom_templates": -1,
  "history_days": -1,
  "export_formats": ["txt", "docx", "pdf"],
  "system_templates": -1,
  "analytics_days": -1,
  "email_reminders": true,
  "ai_insights": true,
  "goals": 5,
  "recurring_tasks": true
}'::jsonb),
('team', 'Team', 'For teams and collaboration', 1500, 15000, '{
  "messages_per_month": -1,
  "active_tasks": -1,
  "custom_templates": -1,
  "history_days": -1,
  "export_formats": ["txt", "docx", "pdf"],
  "system_templates": -1,
  "analytics_days": -1,
  "email_reminders": true,
  "ai_insights": true,
  "goals": -1,
  "recurring_tasks": true,
  "team_features": true,
  "shared_templates": true,
  "team_analytics": true,
  "manager_dashboard": true,
  "slack_integration": true,
  "min_seats": 2,
  "max_seats": 50
}'::jsonb),
('enterprise', 'Enterprise', 'For large organizations', null, null, '{
  "messages_per_month": -1,
  "active_tasks": -1,
  "custom_templates": -1,
  "history_days": -1,
  "export_formats": ["txt", "docx", "pdf", "custom"],
  "system_templates": -1,
  "analytics_days": -1,
  "email_reminders": true,
  "ai_insights": true,
  "goals": -1,
  "recurring_tasks": true,
  "team_features": true,
  "shared_templates": true,
  "team_analytics": true,
  "manager_dashboard": true,
  "slack_integration": true,
  "teams_integration": true,
  "sso": true,
  "audit_logs": true,
  "api_access": true,
  "custom_integrations": true,
  "dedicated_support": true,
  "sla": "99.9"
}'::jsonb);
```

#### 2. **User Subscriptions Table**
```sql
CREATE TABLE user_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  plan_id UUID NOT NULL REFERENCES subscription_plans(id),
  stripe_customer_id TEXT,
  stripe_subscription_id TEXT,
  status TEXT NOT NULL DEFAULT 'active', -- 'active', 'canceled', 'past_due', 'trialing'
  billing_cycle TEXT NOT NULL DEFAULT 'monthly', -- 'monthly', 'yearly'
  current_period_start TIMESTAMP WITH TIME ZONE,
  current_period_end TIMESTAMP WITH TIME ZONE,
  cancel_at_period_end BOOLEAN DEFAULT false,
  trial_start TIMESTAMP WITH TIME ZONE,
  trial_end TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id)
);

CREATE INDEX idx_user_subscriptions_user_id ON user_subscriptions(user_id);
CREATE INDEX idx_user_subscriptions_status ON user_subscriptions(status);
CREATE INDEX idx_user_subscriptions_stripe_customer ON user_subscriptions(stripe_customer_id);
```

#### 3. **Team Subscriptions Table**
```sql
CREATE TABLE team_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  team_id UUID NOT NULL REFERENCES teams(id) ON DELETE CASCADE,
  plan_id UUID NOT NULL REFERENCES subscription_plans(id),
  stripe_customer_id TEXT,
  stripe_subscription_id TEXT,
  status TEXT NOT NULL DEFAULT 'active',
  billing_cycle TEXT NOT NULL DEFAULT 'monthly',
  seats_purchased INTEGER NOT NULL DEFAULT 0,
  seats_used INTEGER NOT NULL DEFAULT 0,
  current_period_start TIMESTAMP WITH TIME ZONE,
  current_period_end TIMESTAMP WITH TIME ZONE,
  cancel_at_period_end BOOLEAN DEFAULT false,
  trial_start TIMESTAMP WITH TIME ZONE,
  trial_end TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(team_id)
);

CREATE INDEX idx_team_subscriptions_team_id ON team_subscriptions(team_id);
CREATE INDEX idx_team_subscriptions_status ON team_subscriptions(status);
```

#### 4. **Usage Tracking Table**
```sql
CREATE TABLE usage_tracking (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  metric TEXT NOT NULL, -- 'messages', 'tasks', 'templates', 'exports', 'api_calls'
  count INTEGER NOT NULL DEFAULT 0,
  period_start DATE NOT NULL,
  period_end DATE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, metric, period_start)
);

CREATE INDEX idx_usage_tracking_user_metric ON usage_tracking(user_id, metric);
CREATE INDEX idx_usage_tracking_period ON usage_tracking(period_start, period_end);
```

#### 5. **Subscription Events Table** (Audit Log)
```sql
CREATE TABLE subscription_events (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,
  team_id UUID REFERENCES teams(id) ON DELETE SET NULL,
  event_type TEXT NOT NULL, -- 'subscription_created', 'subscription_upgraded', 'subscription_canceled', etc.
  from_plan UUID REFERENCES subscription_plans(id),
  to_plan UUID REFERENCES subscription_plans(id),
  metadata JSONB,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_subscription_events_user_id ON subscription_events(user_id);
CREATE INDEX idx_subscription_events_team_id ON subscription_events(team_id);
CREATE INDEX idx_subscription_events_type ON subscription_events(event_type);
```

#### 6. **Helper Functions**

```sql
-- Get user's current plan
CREATE OR REPLACE FUNCTION get_user_plan(user_id UUID)
RETURNS JSONB AS $$
DECLARE
  plan_data JSONB;
BEGIN
  SELECT jsonb_build_object(
    'plan_name', sp.name,
    'display_name', sp.display_name,
    'features', sp.features,
    'status', us.status,
    'trial_end', us.trial_end
  ) INTO plan_data
  FROM user_subscriptions us
  JOIN subscription_plans sp ON us.plan_id = sp.id
  WHERE us.user_id = $1;
  
  -- If no subscription found, return free plan
  IF plan_data IS NULL THEN
    SELECT jsonb_build_object(
      'plan_name', sp.name,
      'display_name', sp.display_name,
      'features', sp.features,
      'status', 'active',
      'trial_end', null
    ) INTO plan_data
    FROM subscription_plans sp
    WHERE sp.name = 'free';
  END IF;
  
  RETURN plan_data;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Check if user has feature access
CREATE OR REPLACE FUNCTION user_has_feature(user_id UUID, feature_key TEXT)
RETURNS BOOLEAN AS $$
DECLARE
  plan_data JSONB;
  feature_value JSONB;
BEGIN
  plan_data := get_user_plan($1);
  feature_value := plan_data->'features'->$2;
  
  -- If feature not found, default to false
  IF feature_value IS NULL THEN
    RETURN false;
  END IF;
  
  -- If boolean, return directly
  IF jsonb_typeof(feature_value) = 'boolean' THEN
    RETURN (feature_value)::boolean;
  END IF;
  
  -- If number, check if > 0 or -1 (unlimited)
  IF jsonb_typeof(feature_value) = 'number' THEN
    RETURN (feature_value)::int != 0;
  END IF;
  
  RETURN false;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Check usage limit
CREATE OR REPLACE FUNCTION check_usage_limit(
  user_id UUID,
  metric TEXT,
  current_usage INTEGER
)
RETURNS BOOLEAN AS $$
DECLARE
  plan_data JSONB;
  limit_value INTEGER;
BEGIN
  plan_data := get_user_plan($1);
  limit_value := (plan_data->'features'->>$2)::int;
  
  -- -1 means unlimited
  IF limit_value = -1 THEN
    RETURN true;
  END IF;
  
  -- Check if under limit
  RETURN $3 < limit_value;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Increment usage counter
CREATE OR REPLACE FUNCTION increment_usage(
  user_id UUID,
  metric TEXT,
  amount INTEGER DEFAULT 1
)
RETURNS void AS $$
DECLARE
  current_period_start DATE;
  current_period_end DATE;
BEGIN
  current_period_start := date_trunc('month', NOW())::date;
  current_period_end := (date_trunc('month', NOW()) + INTERVAL '1 month' - INTERVAL '1 day')::date;
  
  INSERT INTO usage_tracking (user_id, metric, count, period_start, period_end)
  VALUES ($1, $2, $3, current_period_start, current_period_end)
  ON CONFLICT (user_id, metric, period_start)
  DO UPDATE SET
    count = usage_tracking.count + $3,
    updated_at = NOW();
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Get current usage
CREATE OR REPLACE FUNCTION get_current_usage(
  user_id UUID,
  metric TEXT
)
RETURNS INTEGER AS $$
DECLARE
  current_count INTEGER;
  current_period_start DATE;
BEGIN
  current_period_start := date_trunc('month', NOW())::date;
  
  SELECT count INTO current_count
  FROM usage_tracking
  WHERE usage_tracking.user_id = $1
    AND usage_tracking.metric = $2
    AND usage_tracking.period_start = current_period_start;
  
  RETURN COALESCE(current_count, 0);
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

#### 7. **Row Level Security (RLS) Policies**

```sql
-- User Subscriptions RLS
ALTER TABLE user_subscriptions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own subscription"
  ON user_subscriptions FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can update their own subscription"
  ON user_subscriptions FOR UPDATE
  USING (auth.uid() = user_id);

-- Team Subscriptions RLS
ALTER TABLE team_subscriptions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Team members can view team subscription"
  ON team_subscriptions FOR SELECT
  USING (is_team_member(auth.uid(), team_id));

CREATE POLICY "Team admins can update team subscription"
  ON team_subscriptions FOR UPDATE
  USING (can_manage_team(auth.uid(), team_id));

-- Usage Tracking RLS
ALTER TABLE usage_tracking ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own usage"
  ON usage_tracking FOR SELECT
  USING (auth.uid() = user_id);

-- Subscription Events RLS (read-only)
ALTER TABLE subscription_events ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own events"
  ON subscription_events FOR SELECT
  USING (auth.uid() = user_id);
```

#### 8. **Triggers**

```sql
-- Auto-assign free plan on user creation
CREATE OR REPLACE FUNCTION assign_free_plan_to_new_user()
RETURNS TRIGGER AS $$
DECLARE
  free_plan_id UUID;
BEGIN
  SELECT id INTO free_plan_id FROM subscription_plans WHERE name = 'free';
  
  INSERT INTO user_subscriptions (user_id, plan_id, status)
  VALUES (NEW.id, free_plan_id, 'active');
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_user_created_assign_plan
  AFTER INSERT ON auth.users
  FOR EACH ROW
  EXECUTE FUNCTION assign_free_plan_to_new_user();

-- Log subscription changes
CREATE OR REPLACE FUNCTION log_subscription_change()
RETURNS TRIGGER AS $$
BEGIN
  IF TG_OP = 'INSERT' THEN
    INSERT INTO subscription_events (user_id, event_type, to_plan)
    VALUES (NEW.user_id, 'subscription_created', NEW.plan_id);
  ELSIF TG_OP = 'UPDATE' AND OLD.plan_id != NEW.plan_id THEN
    INSERT INTO subscription_events (user_id, event_type, from_plan, to_plan)
    VALUES (NEW.user_id, 'subscription_changed', OLD.plan_id, NEW.plan_id);
  ELSIF TG_OP = 'UPDATE' AND OLD.status != NEW.status THEN
    INSERT INTO subscription_events (user_id, event_type, to_plan, metadata)
    VALUES (NEW.user_id, 'subscription_status_changed', NEW.plan_id, 
            jsonb_build_object('old_status', OLD.status, 'new_status', NEW.status));
  END IF;
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_subscription_change
  AFTER INSERT OR UPDATE ON user_subscriptions
  FOR EACH ROW
  EXECUTE FUNCTION log_subscription_change();
```

---

### Middleware & Feature Gating

#### 1. **Subscription Context** (`lib/subscriptions/subscription-context.tsx`)

```typescript
import { createContext, useContext, useEffect, useState } from 'react'
import { useAuth } from '@/lib/auth/auth-context'
import { supabase } from '@/lib/supabase/client'

interface PlanFeatures {
  messages_per_month: number // -1 = unlimited
  active_tasks: number
  custom_templates: number
  history_days: number
  export_formats: string[]
  email_reminders: boolean
  ai_insights: boolean
  team_features: boolean
  // ... etc
}

interface Subscription {
  planName: string
  displayName: string
  status: string
  features: PlanFeatures
  trialEnd: string | null
}

interface Usage {
  messages: number
  tasks: number
  templates: number
}

interface SubscriptionContextType {
  subscription: Subscription | null
  usage: Usage | null
  loading: boolean
  hasFeature: (feature: string) => boolean
  canUseFeature: (feature: string, currentUsage?: number) => boolean
  upgradeRequired: boolean
}

const SubscriptionContext = createContext<SubscriptionContextType>({
  subscription: null,
  usage: null,
  loading: true,
  hasFeature: () => false,
  canUseFeature: () => false,
  upgradeRequired: false,
})

export const useSubscription = () => useContext(SubscriptionContext)

export function SubscriptionProvider({ children }: { children: React.ReactNode }) {
  const { user } = useAuth()
  const [subscription, setSubscription] = useState<Subscription | null>(null)
  const [usage, setUsage] = useState<Usage | null>(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    if (!user) {
      setLoading(false)
      return
    }

    fetchSubscription()
    fetchUsage()
  }, [user])

  async function fetchSubscription() {
    const { data, error } = await supabase.rpc('get_user_plan', {
      user_id: user!.id,
    })

    if (!error && data) {
      setSubscription(data)
    }
    setLoading(false)
  }

  async function fetchUsage() {
    const metrics = ['messages', 'tasks', 'templates']
    const usageData: any = {}

    for (const metric of metrics) {
      const { data } = await supabase.rpc('get_current_usage', {
        user_id: user!.id,
        metric,
      })
      usageData[metric] = data || 0
    }

    setUsage(usageData)
  }

  function hasFeature(feature: string): boolean {
    if (!subscription) return false
    const value = subscription.features[feature as keyof PlanFeatures]
    return value === true || value === -1 || (typeof value === 'number' && value > 0)
  }

  function canUseFeature(feature: string, currentUsage?: number): boolean {
    if (!subscription) return false

    const limit = subscription.features[feature as keyof PlanFeatures]

    // -1 means unlimited
    if (limit === -1) return true

    // Boolean features
    if (typeof limit === 'boolean') return limit

    // Numeric limits
    if (typeof limit === 'number' && currentUsage !== undefined) {
      return currentUsage < limit
    }

    return false
  }

  const upgradeRequired = subscription?.planName === 'free'

  return (
    <SubscriptionContext.Provider
      value={{
        subscription,
        usage,
        loading,
        hasFeature,
        canUseFeature,
        upgradeRequired,
      }}
    >
      {children}
    </SubscriptionContext.Provider>
  )
}
```

#### 2. **Feature Gate Components**

```typescript
// components/subscription/feature-gate.tsx
import { useSubscription } from '@/lib/subscriptions/subscription-context'
import { UpgradePrompt } from './upgrade-prompt'

interface FeatureGateProps {
  feature: string
  fallback?: React.ReactNode
  children: React.ReactNode
}

export function FeatureGate({ feature, fallback, children }: FeatureGateProps) {
  const { hasFeature } = useSubscription()

  if (!hasFeature(feature)) {
    return fallback || <UpgradePrompt feature={feature} />
  }

  return <>{children}</>
}

// Usage:
<FeatureGate feature="ai_insights">
  <AIInsightsPanel />
</FeatureGate>
```

```typescript
// components/subscription/usage-gate.tsx
import { useSubscription } from '@/lib/subscriptions/subscription-context'
import { UsageLimitPrompt } from './usage-limit-prompt'

interface UsageGateProps {
  metric: string
  currentUsage: number
  children: React.ReactNode
  fallback?: React.ReactNode
}

export function UsageGate({ metric, currentUsage, children, fallback }: UsageGateProps) {
  const { canUseFeature } = useSubscription()

  if (!canUseFeature(metric, currentUsage)) {
    return fallback || <UsageLimitPrompt metric={metric} />
  }

  return <>{children}</>
}

// Usage:
<UsageGate metric="messages_per_month" currentUsage={messageCount}>
  <MessageInput />
</UsageGate>
```

#### 3. **API Route Protection** (`lib/subscriptions/middleware.ts`)

```typescript
import { createServerClient } from '@supabase/ssr'
import { NextRequest, NextResponse } from 'next/server'

export async function checkSubscription(request: NextRequest, requiredFeature: string) {
  const supabase = createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_ROLE_KEY!,
    { cookies: request.cookies }
  )

  const {
    data: { user },
  } = await supabase.auth.getUser()

  if (!user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
  }

  const { data: hasAccess } = await supabase.rpc('user_has_feature', {
    user_id: user.id,
    feature_key: requiredFeature,
  })

  if (!hasAccess) {
    return NextResponse.json(
      { error: 'Feature not available in your plan', upgrade_required: true },
      { status: 403 }
    )
  }

  return null // Access granted
}

export async function checkUsageLimit(request: NextRequest, metric: string) {
  const supabase = createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_ROLE_KEY!,
    { cookies: request.cookies }
  )

  const {
    data: { user },
  } = await supabase.auth.getUser()

  if (!user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
  }

  const { data: currentUsage } = await supabase.rpc('get_current_usage', {
    user_id: user.id,
    metric,
  })

  const { data: canUse } = await supabase.rpc('check_usage_limit', {
    user_id: user.id,
    metric,
    current_usage: currentUsage || 0,
  })

  if (!canUse) {
    return NextResponse.json(
      {
        error: 'Usage limit exceeded',
        current_usage: currentUsage,
        upgrade_required: true,
      },
      { status: 429 }
    )
  }

  return null // Usage OK
}

// Usage in API route:
export async function POST(request: NextRequest) {
  // Check if user has access to this feature
  const accessCheck = await checkSubscription(request, 'ai_insights')
  if (accessCheck) return accessCheck

  // Check usage limit
  const usageCheck = await checkUsageLimit(request, 'messages')
  if (usageCheck) return usageCheck

  // Proceed with API logic...
  // Don't forget to increment usage:
  await supabase.rpc('increment_usage', {
    user_id: user.id,
    metric: 'messages',
    amount: 1,
  })

  return NextResponse.json({ success: true })
}
```

---

## Payment Integration

### Stripe Integration

#### 1. **Setup**

```bash
# Install Stripe
npm install stripe @stripe/stripe-js

# Environment variables
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
```

#### 2. **Stripe Configuration** (`lib/stripe/config.ts`)

```typescript
import Stripe from 'stripe'

export const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {
  apiVersion: '2024-10-28.acacia',
})

// Product and Price IDs (create these in Stripe Dashboard)
export const STRIPE_PRODUCTS = {
  pro: {
    monthly: process.env.STRIPE_PRO_MONTHLY_PRICE_ID!,
    yearly: process.env.STRIPE_PRO_YEARLY_PRICE_ID!,
  },
  team: {
    monthly: process.env.STRIPE_TEAM_MONTHLY_PRICE_ID!,
    yearly: process.env.STRIPE_TEAM_YEARLY_PRICE_ID!,
  },
}
```

#### 3. **Checkout Flow** (`app/api/stripe/create-checkout/route.ts`)

```typescript
import { NextRequest, NextResponse } from 'next/server'
import { stripe, STRIPE_PRODUCTS } from '@/lib/stripe/config'
import { createServerClient } from '@supabase/ssr'

export async function POST(request: NextRequest) {
  const supabase = createServerClient(...)
  const {
    data: { user },
  } = await supabase.auth.getUser()

  if (!user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
  }

  const { planName, billingCycle, teamId } = await request.json()

  // Get or create Stripe customer
  let customerId: string

  if (teamId) {
    // Team subscription
    const { data: teamSub } = await supabase
      .from('team_subscriptions')
      .select('stripe_customer_id')
      .eq('team_id', teamId)
      .single()

    customerId = teamSub?.stripe_customer_id || ''
  } else {
    // Individual subscription
    const { data: userSub } = await supabase
      .from('user_subscriptions')
      .select('stripe_customer_id')
      .eq('user_id', user.id)
      .single()

    customerId = userSub?.stripe_customer_id || ''
  }

  if (!customerId) {
    const customer = await stripe.customers.create({
      email: user.email,
      metadata: {
        user_id: user.id,
        team_id: teamId || '',
      },
    })
    customerId = customer.id

    // Save customer ID
    if (teamId) {
      await supabase
        .from('team_subscriptions')
        .update({ stripe_customer_id: customerId })
        .eq('team_id', teamId)
    } else {
      await supabase
        .from('user_subscriptions')
        .update({ stripe_customer_id: customerId })
        .eq('user_id', user.id)
    }
  }

  // Create checkout session
  const priceId = STRIPE_PRODUCTS[planName as 'pro' | 'team'][billingCycle as 'monthly' | 'yearly']

  const session = await stripe.checkout.sessions.create({
    customer: customerId,
    mode: 'subscription',
    payment_method_types: ['card'],
    line_items: [
      {
        price: priceId,
        quantity: teamId ? 1 : 1, // For teams, will handle seat count separately
      },
    ],
    success_url: `${process.env.NEXT_PUBLIC_APP_URL}/settings/billing?success=true`,
    cancel_url: `${process.env.NEXT_PUBLIC_APP_URL}/settings/billing?canceled=true`,
    metadata: {
      user_id: user.id,
      team_id: teamId || '',
      plan_name: planName,
    },
  })

  return NextResponse.json({ url: session.url })
}
```

#### 4. **Webhook Handler** (`app/api/stripe/webhook/route.ts`)

```typescript
import { NextRequest, NextResponse } from 'next/server'
import { stripe } from '@/lib/stripe/config'
import { supabaseServer } from '@/lib/supabase/server'
import Stripe from 'stripe'

export async function POST(request: NextRequest) {
  const body = await request.text()
  const signature = request.headers.get('stripe-signature')!

  let event: Stripe.Event

  try {
    event = stripe.webhooks.constructEvent(body, signature, process.env.STRIPE_WEBHOOK_SECRET!)
  } catch (err) {
    return NextResponse.json({ error: 'Invalid signature' }, { status: 400 })
  }

  switch (event.type) {
    case 'checkout.session.completed':
      await handleCheckoutCompleted(event.data.object as Stripe.Checkout.Session)
      break

    case 'customer.subscription.updated':
      await handleSubscriptionUpdated(event.data.object as Stripe.Subscription)
      break

    case 'customer.subscription.deleted':
      await handleSubscriptionDeleted(event.data.object as Stripe.Subscription)
      break

    case 'invoice.payment_failed':
      await handlePaymentFailed(event.data.object as Stripe.Invoice)
      break
  }

  return NextResponse.json({ received: true })
}

async function handleCheckoutCompleted(session: Stripe.Checkout.Session) {
  const userId = session.metadata?.user_id
  const teamId = session.metadata?.team_id
  const planName = session.metadata?.plan_name

  // Get plan ID
  const { data: plan } = await supabaseServer
    .from('subscription_plans')
    .select('id')
    .eq('name', planName)
    .single()

  if (!plan) return

  const subscription = await stripe.subscriptions.retrieve(session.subscription as string)

  if (teamId) {
    // Update team subscription
    await supabaseServer
      .from('team_subscriptions')
      .update({
        plan_id: plan.id,
        stripe_subscription_id: subscription.id,
        status: subscription.status,
        current_period_start: new Date(subscription.current_period_start * 1000).toISOString(),
        current_period_end: new Date(subscription.current_period_end * 1000).toISOString(),
      })
      .eq('team_id', teamId)
  } else {
    // Update user subscription
    await supabaseServer
      .from('user_subscriptions')
      .update({
        plan_id: plan.id,
        stripe_subscription_id: subscription.id,
        status: subscription.status,
        current_period_start: new Date(subscription.current_period_start * 1000).toISOString(),
        current_period_end: new Date(subscription.current_period_end * 1000).toISOString(),
      })
      .eq('user_id', userId)
  }
}

async function handleSubscriptionUpdated(subscription: Stripe.Subscription) {
  await supabaseServer
    .from('user_subscriptions')
    .update({
      status: subscription.status,
      current_period_start: new Date(subscription.current_period_start * 1000).toISOString(),
      current_period_end: new Date(subscription.current_period_end * 1000).toISOString(),
      cancel_at_period_end: subscription.cancel_at_period_end,
    })
    .eq('stripe_subscription_id', subscription.id)
}

async function handleSubscriptionDeleted(subscription: Stripe.Subscription) {
  // Downgrade to free plan
  const { data: freePlan } = await supabaseServer
    .from('subscription_plans')
    .select('id')
    .eq('name', 'free')
    .single()

  if (!freePlan) return

  await supabaseServer
    .from('user_subscriptions')
    .update({
      plan_id: freePlan.id,
      status: 'canceled',
    })
    .eq('stripe_subscription_id', subscription.id)
}

async function handlePaymentFailed(invoice: Stripe.Invoice) {
  // Send email notification
  // Update subscription status to 'past_due'
  await supabaseServer
    .from('user_subscriptions')
    .update({ status: 'past_due' })
    .eq('stripe_subscription_id', invoice.subscription as string)
}
```

#### 5. **Customer Portal** (`app/api/stripe/portal/route.ts`)

```typescript
import { NextRequest, NextResponse } from 'next/server'
import { stripe } from '@/lib/stripe/config'
import { createServerClient } from '@supabase/ssr'

export async function POST(request: NextRequest) {
  const supabase = createServerClient(...)
  const {
    data: { user },
  } = await supabase.auth.getUser()

  if (!user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
  }

  // Get Stripe customer ID
  const { data: subscription } = await supabase
    .from('user_subscriptions')
    .select('stripe_customer_id')
    .eq('user_id', user.id)
    .single()

  if (!subscription?.stripe_customer_id) {
    return NextResponse.json({ error: 'No subscription found' }, { status: 404 })
  }

  // Create portal session
  const session = await stripe.billingPortal.sessions.create({
    customer: subscription.stripe_customer_id,
    return_url: `${process.env.NEXT_PUBLIC_APP_URL}/settings/billing`,
  })

  return NextResponse.json({ url: session.url })
}
```

---

## Billing Structure

### Per-User Pricing (Teams)

**Seat-Based Billing:**
- Charge per active team member
- Minimum: 2 seats
- Maximum: 50 seats (Team tier)
- Proration handled by Stripe

**Seat Management:**
- Add seats: Prorated charge
- Remove seats: Credit for unused time
- Unused seats: Still charged (prevents abuse)

**Example:**
- Team of 10: $150/month
- Add 5 members mid-month: +$37.50 prorated
- Next month: $225/month for 15 seats

### Volume Discounts (Enterprise)

**Tiered Pricing:**
- 1-50 users: $20/user/month
- 51-100 users: $18/user/month (10% off)
- 101-250 users: $16/user/month (20% off)
- 251-500 users: $14/user/month (30% off)
- 500+ users: $12/user/month (40% off)

**Custom Contracts:**
- Negotiable for 1000+ users
- Multi-year discounts available
- Custom payment terms (Net 30, Net 60)

### Annual vs Monthly

**Annual Benefits:**
- 17% discount (2 months free)
- Price lock for 12 months
- Priority support
- Early access to features

**Monthly Benefits:**
- Flexibility
- Lower commitment
- Cancel anytime

---

## Trial & Onboarding

### Free Trial Strategy

**Pro Tier:**
- **14-day free trial**
- Credit card required
- Full access to Pro features
- Email reminders on days 7, 12, 13, 14
- Automatic conversion after trial

**Team Tier:**
- **30-day free trial**
- Credit card required
- Up to 10 users during trial
- Dedicated onboarding call
- Email sequence for activation

**Enterprise:**
- **60-day pilot program**
- Custom contract
- Dedicated CSM
- Implementation support
- Success metrics defined

### Trial Conversion Tactics

**During Trial:**
1. **Day 1:** Welcome email + onboarding checklist
2. **Day 3:** Feature spotlight: AI insights
3. **Day 7:** Usage report + value demonstration
4. **Day 10:** Case study email
5. **Day 12:** Trial expiring soon (Pro)
6. **Day 14:** Last chance to continue (Pro)

**Post-Trial:**
- Immediate: Thank you for subscribing
- 7 days: Check-in email
- 30 days: Feedback request
- 60 days: Expansion opportunities

### Onboarding Experience

**Self-Service (Free & Pro):**
1. Guided product tour
2. Sample templates pre-loaded
3. Video tutorials
4. Help articles
5. Chatbot support

**Concierge (Team):**
1. Kickoff call with team admin
2. Team setup assistance
3. Integration configuration
4. Training session
5. Follow-up after 2 weeks

**White-Glove (Enterprise):**
1. Discovery and planning
2. Custom implementation plan
3. SSO setup
4. Integration development
5. User training sessions
6. Ongoing quarterly reviews

---

## Upgrade Paths & Conversion Strategy

### In-App Upgrade Prompts

**Soft Prompts (Non-Blocking):**
- Banner at top of app: "You're on Free - Upgrade for unlimited messages"
- Badge on locked features
- Upgrade CTA in settings
- Usage meter showing limits

**Hard Prompts (Blocking):**
- Message limit reached: Modal with upgrade
- Feature access attempt: Gate with explanation
- Export format selection: Show premium formats
- Analytics view: Blur with upgrade overlay

### Triggered Upgrade Campaigns

**Behavioral Triggers:**
1. **Power User** (50 messages in 30 days): "You're a power user! Upgrade to Pro"
2. **Feature Attempt** (tried locked feature 3x): "You need [Feature] - Upgrade now"
3. **Export Attempt** (wanted PDF/DOCX): "Professional exports available on Pro"
4. **Team Creation** (invited someone): "Upgrade to Team for collaboration"

**Time-Based Triggers:**
- 30 days on Free: Upgrade offer email
- 90 days on Free: Special discount offer
- 180 days on Free: Case study showcasing value
- 365 days on Free: Loyalty discount

### Pricing Page Optimization

**Elements:**
1. Clear feature comparison table
2. Most popular badge on Pro
3. Annual savings highlighted
4. Social proof (testimonials, logos)
5. ROI calculator
6. FAQ section
7. Live chat support

**A/B Testing Ideas:**
- Annual vs monthly default
- 3 tiers vs 4 tiers
- Pricing display format
- CTA copy ("Start Free Trial" vs "Get Started")

---

## Revenue Projections

### Assumptions

**User Acquisition:**
- Month 1-3: 100 free users/month
- Month 4-6: 250 free users/month
- Month 7-12: 500 free users/month

**Conversion Rates:**
- Free to Pro: 10% (industry average: 2-5%)
- Pro to Team: 5%
- Direct to Team: 2% of free users

**Churn Rates:**
- Free: 50%/year (high but acceptable)
- Pro: 10%/year (good retention)
- Team: 5%/year (excellent retention)

### 12-Month Revenue Projection

| Month | Free Users | Pro Users | Team Users | MRR | ARR |
|-------|-----------|----------|-----------|-----|-----|
| 1 | 100 | 0 | 0 | $0 | $0 |
| 2 | 200 | 10 | 0 | $90 | $1,080 |
| 3 | 300 | 30 | 1 (5 seats) | $345 | $4,140 |
| 6 | 975 | 98 | 5 (25 seats) | $1,257 | $15,084 |
| 12 | 2,850 | 285 | 15 (75 seats) | $3,690 | $44,280 |

**Detailed Month 12:**
- 285 Pro users × $9 = $2,565
- 15 teams × 5 avg seats × $15 = $1,125
- **Total MRR:** $3,690
- **Total ARR:** $44,280

### 3-Year Revenue Projection

| Year | Free Users | Pro Users | Team Users | MRR | ARR |
|------|-----------|----------|-----------|-----|-----|
| 1 | 2,850 | 285 | 15 (75 seats) | $3,690 | $44,280 |
| 2 | 8,550 | 855 | 60 (300 seats) | $12,195 | $146,340 |
| 3 | 17,100 | 1,710 | 150 (750 seats) | $26,625 | $319,500 |

**Year 3 Breakdown:**
- Pro: 1,710 × $9 = $15,390
- Team: 750 seats × $15 = $11,250
- **Total MRR:** $26,640
- **Total ARR:** $319,680

**Revenue Mix (Year 3):**
- Pro: 58% of revenue
- Team: 42% of revenue

### Enterprise Growth (Conservative)

**Assuming 2 enterprise deals by Year 2:**
- Deal 1: 200 users @ $15/user = $3,000/month
- Deal 2: 150 users @ $16/user = $2,400/month
- **Enterprise MRR:** $5,400
- **Enterprise ARR:** $64,800

**Updated Year 2 with Enterprise:**
- **Total MRR:** $17,595 (vs $12,195 without)
- **Total ARR:** $211,140 (vs $146,340 without)
- Enterprise contribution: 31% of revenue

### Key Metrics Targets

**Year 1:**
- CAC (Customer Acquisition Cost): $50-100
- LTV (Lifetime Value): $500-1,000
- LTV:CAC Ratio: 5-10x
- Gross Margin: 80%+
- Net Revenue Retention: 90%

**Year 2:**
- CAC: $75-150
- LTV: $1,000-2,000
- LTV:CAC Ratio: 8-15x
- Gross Margin: 85%+
- Net Revenue Retention: 110% (expansion)

---

## Cost Considerations

### Fixed Costs (Monthly)

- **Infrastructure:**
  - Vercel: $20 (Pro)
  - Supabase: $25 (Pro)
  - Resend: $20 (Pro)
  - Stripe: $0 (pay-as-you-go)
  - **Total:** ~$65/month

- **Services:**
  - Customer support tool: $50/month
  - Analytics: $50/month
  - **Total:** ~$100/month

**Total Fixed Costs:** $165/month

### Variable Costs

**Per User:**
- Anthropic API: $0.50-2/user/month (depends on usage)
- Email: $0.10/user/month
- Database: $0.05/user/month
- **Total:** ~$0.65-2.15/user/month

**Conservative:** $1/user/month average

### Margin Analysis

**Pro User:**
- Revenue: $9/month
- Cost: $1/month
- **Gross Margin:** 89%

**Team User (per seat):**
- Revenue: $15/month
- Cost: $1/month
- **Gross Margin:** 93%

**Enterprise User (per seat):**
- Revenue: $20/month
- Cost: $1.50/month (higher usage)
- **Gross Margin:** 92.5%

**Overall Gross Margin Target:** 85-90%

### Break-Even Analysis

**Fixed Costs:** $165/month
**Gross Margin:** 90% average

**Break-even:** $165 / 0.90 = $183 MRR needed
**Users needed (Pro only):** 20-25 paid users
**Expected:** Month 2-3

---

## Success Metrics & KPIs

### Acquisition Metrics
- **Free Signups:** Target 500/month by Month 6
- **Activation Rate:** % who complete onboarding (Target: 60%)
- **Time to Value:** Days until first accomplishment logged (Target: <1 day)

### Conversion Metrics
- **Free to Paid:** % conversion (Target: 10%)
- **Trial to Paid:** % who convert after trial (Target: 40%)
- **Upgrade Rate:** % Pro users upgrading to Team (Target: 5%)

### Retention Metrics
- **Monthly Churn:** % cancellations (Target: <2%/month for paid)
- **Annual Retention:** % remaining after 1 year (Target: >90% for Team)
- **Net Revenue Retention:** Growth from existing customers (Target: >100%)

### Engagement Metrics
- **DAU/MAU:** Daily vs monthly active users (Target: >40%)
- **Messages per User:** Average messages sent (Target: 50+/month for paid)
- **Feature Adoption:** % using key features (Target: >60% for Pro features)

### Revenue Metrics
- **MRR:** Monthly recurring revenue
- **ARR:** Annual recurring revenue
- **ARPU:** Average revenue per user (Target: $12+)
- **Expansion Revenue:** Upsells and seat additions (Target: 20% of MRR)

### Support Metrics
- **Response Time:** Hours to first response (Target: <4h for paid)
- **Resolution Time:** Hours to resolve (Target: <24h for paid)
- **CSAT:** Customer satisfaction score (Target: >90%)
- **NPS:** Net Promoter Score (Target: >50)

---

## Competitive Moats & Defensibility

### Short-Term (6-12 months)
1. **AI Quality:** Best-in-class Claude integration
2. **Ease of Use:** Simplest onboarding in category
3. **Price:** Most affordable for small teams
4. **Focus:** Purpose-built for daily accomplishments

### Medium-Term (1-2 years)
1. **Data Network Effects:** Better AI with more data
2. **Integrations:** Deep integration with popular tools
3. **Template Library:** Crowdsourced best practices
4. **Brand:** Recognized leader in daily reflection

### Long-Term (3+ years)
1. **Switching Costs:** Years of data locked in
2. **Habit Formation:** Daily use creates stickiness
3. **Team Collaboration:** Network effects within organizations
4. **Industry Standards:** Become the default solution

---

## Risk Mitigation

### Pricing Risks

**Risk 1: Too Expensive**
- **Mitigation:** Start with lower price, increase gradually
- **Signal:** Low conversion rates, price objections
- **Response:** Offer discounts, test lower prices

**Risk 2: Too Cheap**
- **Mitigation:** Anchor against competitors, emphasize value
- **Signal:** Very high conversion, low perceived value
- **Response:** Increase prices for new customers, grandfather existing

**Risk 3: Wrong Value Metric**
- **Mitigation:** Test per-seat vs flat rate vs usage-based
- **Signal:** Customer complaints, upgrade friction
- **Response:** Pivot pricing model, grandfather existing customers

### Competition Risks

**Risk 1: Major Player Enters**
- **Mitigation:** Build strong brand and community early
- **Response:** Focus on niche, emphasize differentiation

**Risk 2: Price War**
- **Mitigation:** Compete on value, not price
- **Response:** Bundle more features, improve product

### Economic Risks

**Risk 1: Recession**
- **Mitigation:** Strong ROI story, annual discounts
- **Response:** Introduce cheaper tier, payment plans

**Risk 2: Budget Cuts**
- **Mitigation:** Bottom-up adoption, clear value
- **Response:** Flexible contracts, pause options

---

## Next Steps & Action Items

### Immediate (This Week)
1. [ ] Review and approve pricing strategy
2. [ ] Set up Stripe account and products
3. [ ] Create database migration for subscriptions
4. [ ] Design subscription management UI

### Short-Term (Next 2 Weeks)
1. [ ] Implement subscription context and hooks
2. [ ] Build checkout flow
3. [ ] Implement webhook handlers
4. [ ] Add feature gates to existing features
5. [ ] Create pricing page

### Medium-Term (Next Month)
1. [ ] Launch Free and Pro tiers
2. [ ] Build usage tracking system
3. [ ] Implement upgrade prompts
4. [ ] Create billing portal
5. [ ] Set up analytics tracking

### Long-Term (Next Quarter)
1. [ ] Launch Team tier
2. [ ] Develop enterprise features
3. [ ] Build sales collateral
4. [ ] Create customer success program
5. [ ] Optimize for conversion

---

## Appendix

### Additional Resources

**Pricing Psychology:**
- "Monetizing Innovation" by Madhavan Ramanujam
- "Predictably Irrational" by Dan Ariely
- "The Strategy and Tactics of Pricing" by Thomas Nagle

**SaaS Metrics:**
- SaaStr Annual Conference talks
- ProfitWell blog
- ChartMogul guides

**Competitive Intelligence:**
- G2 Crowd reviews
- Capterra comparisons
- Product Hunt launches

### Tools & Services

**Pricing:**
- ProfitWell: Subscription metrics and analytics
- Price Intelligently: Pricing optimization
- Baremetrics: Revenue analytics

**Payment:**
- Stripe: Payment processing
- Chargebee: Subscription management
- Paddle: Merchant of record

**Support:**
- Intercom: Customer messaging
- Zendesk: Support tickets
- Plain: Modern support platform

---

## Document Version History

- **v1.0** (2025-11-06): Initial comprehensive pricing plan created
- **Author:** Claude AI (Sonnet 4.5)
- **Reviewer:** [Your name]
- **Status:** Draft - Awaiting approval

---

## Approval Sign-Off

- [ ] **Product Lead:** ___________________ Date: ___________
- [ ] **Engineering Lead:** ___________________ Date: ___________
- [ ] **Finance:** ___________________ Date: ___________
- [ ] **CEO/Founder:** ___________________ Date: ___________

---

*This document is a comprehensive pricing plan for the DAR application. It should be reviewed quarterly and updated as market conditions and product capabilities evolve.*
